(this.webpackJsonpreact_imagehosting=this.webpackJsonpreact_imagehosting||[]).push([[2],{101:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),o=n(15),c=n.n(o),a=n(19),s=(n(95),n.p+"static/media/logo.6ce24c58.svg"),u=n(38),l=n(6),p=n(20),b=n(102),f=n(66),j=n(68);function O(){var e=Object(a.a)(["\n  margin-left: 10px;\n"]);return O=function(){return e},e}function h(){var e=Object(a.a)(["\n  margin-left: auto;\n"]);return h=function(){return e},e}function y(){var e=Object(a.a)(["\n  color: #fff;\n  margin-left: 30px;\n\n  &.active {\n    border-bottom: 1px solid white;\n  }\n"]);return y=function(){return e},e}function g(){var e=Object(a.a)(["\n  height: 30px;\n"]);return g=function(){return e},e}function m(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 100px;\n  background-color: #22075e;\n  color: #fff;\n"]);return m=function(){return e},e}var d=p.a.header(m()),v=p.a.img(g()),w=Object(p.a)(u.b)(y()),x=p.a.div(h()),U=Object(p.a)(b.a)(O()),P=Object(j.a)((function(){var e=Object(l.f)(),t=Object(f.a)(),n=t.UserStore,o=t.AuthStore;return Object(i.useEffect)((function(){n.pullUser()}),[]),Object(r.jsxs)(d,{children:[Object(r.jsx)(v,{src:s}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(w,{to:"/",activeClassName:"active",exact:!0,children:"\u9996\u9875"}),Object(r.jsx)(w,{to:"/history",activeClassName:"active",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(r.jsx)(w,{to:"/about",activeClassName:"active",children:"\u5173\u4e8e\u6211"})]}),Object(r.jsx)(x,{children:n.currentUser?Object(r.jsxs)(r.Fragment,{children:[n.currentUser.attributes.username,Object(r.jsx)(U,{type:"primary",onClick:function(){o.logout()},children:"\u6ce8\u9500"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")},children:"\u767b\u5f55"}),Object(r.jsx)(U,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")},children:"\u6ce8\u518c"})]})})]})}));function k(){var e=Object(a.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n  background: #eceff2;\n"]);return k=function(){return e},e}var F=p.a.footer(k());var z=function(){return Object(r.jsx)(F,{children:Object(r.jsxs)("p",{children:["\u672c\u7248\u672c\u7531 ",Object(r.jsx)("a",{href:"https://github.com/BOBOlife",target:"_blank",children:"bobolife"}),"\u6240\u6709"]})})};var D=function(){return Object(r.jsx)("div",{children:"Loading"})};n(100);function S(){var e=Object(a.a)(["\n  background: #eceff2;\n"]);return S=function(){return e},e}var C=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,260))})),L=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,261))})),I=Object(i.lazy)((function(){return n.e(7).then(n.bind(null,252))})),A=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,253))})),N=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,254))})),T=p.a.main(S());var B=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P,{}),Object(r.jsx)(T,{children:Object(r.jsx)(i.Suspense,{fallback:Object(r.jsx)(D,{}),children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{path:"/",exact:!0,component:C}),Object(r.jsx)(l.a,{path:"/history",exact:!0,component:L}),Object(r.jsx)(l.a,{path:"/about",exact:!0,component:I}),Object(r.jsx)(l.a,{path:"/login",exact:!0,component:A}),Object(r.jsx)(l.a,{path:"/register",exact:!0,component:N})]})})}),Object(r.jsx)(z,{})]})},J=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,255)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};c.a.render(Object(r.jsx)(u.a,{children:Object(r.jsx)(B,{})}),document.getElementById("root")),J()},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var r=n(0),i=n(12),o=n(26),c=n(27),a=n(4),s=(n(49),n(1)),u=n(17),l=n.n(u);l.a.init({appId:"G7YeAs0W0AErUtOkw7OLJ1j6-9Nh9j0Va",appKey:"egmTpN6sgYaJNkqu3P9owTo7",serverURL:"https://g7yeas0w.lc-cn-e1-shared.com"});var p,b,f,j,O,h,y,g,m,d,v,w,x,U,P=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},k=function(e,t){return console.log("------"),console.log(e,t),new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},F=function(){u.User.logOut()},z=function(){return u.User.current()},D=function(e,t){var n=new l.a.Object("Image"),r=new l.a.File(t,e);return n.set("filename",t),n.set("owner",l.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},S=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new l.a.Query("Image");return o.include("owner"),o.limit(i),o.skip(n*i),o.descending("createdAt"),o.equalTo("owner",l.a.User.current()),new Promise((function(e,t){o.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},C=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",b,this)}return Object(c.a)(e,[{key:"pullUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(a.a)(p.prototype,"currentUser",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(p.prototype,"pullUser",[s.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(a.a)(p.prototype,"resetUser",[s.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),L=n(104),I=new(f=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",j,this),Object(i.a)(this,"file",O,this),Object(i.a)(this,"isUpoading",h,this),Object(i.a)(this,"serverFile",y,this)}return Object(c.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpoading=!0,this.serverFile=null,new Promise((function(t,n){D(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpoading=!1}))}))}},{key:"reset",value:function(){this.isUpoading=!1,this.serverFile=null}}]),e}(),j=Object(a.a)(f.prototype,"filename",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=Object(a.a)(f.prototype,"file",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=Object(a.a)(f.prototype,"isUpoading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(a.a)(f.prototype,"serverFile",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(f.prototype,"setFilename",[s.f],Object.getOwnPropertyDescriptor(f.prototype,"setFilename"),f.prototype),Object(a.a)(f.prototype,"setFile",[s.f],Object.getOwnPropertyDescriptor(f.prototype,"setFile"),f.prototype),Object(a.a)(f.prototype,"upload",[s.f],Object.getOwnPropertyDescriptor(f.prototype,"upload"),f.prototype),Object(a.a)(f.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(f.prototype,"reset"),f.prototype),f),A=new(g=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",m,this),Object(i.a)(this,"isLoading",d,this),Object(i.a)(this,"hasMore",v,this),Object(i.a)(this,"page",w,this),this.limit=10}return Object(c.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;S({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){L.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),m=Object(a.a)(g.prototype,"list",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(a.a)(g.prototype,"isLoading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(a.a)(g.prototype,"hasMore",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=Object(a.a)(g.prototype,"page",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(a.a)(g.prototype,"append",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"append"),g.prototype),Object(a.a)(g.prototype,"find",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"find"),g.prototype),Object(a.a)(g.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),N=new(x=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",U,this)}return Object(c.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){C.resetUser(),L.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){P(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){C.resetUser(),L.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){F(),C.resetUser(),A.reset(),I.reset()}}]),e}(),U=Object(a.a)(x.prototype,"values",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(a.a)(x.prototype,"setUsername",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(a.a)(x.prototype,"setPassword",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(a.a)(x.prototype,"login",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(a.a)(x.prototype,"register",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(a.a)(x.prototype,"logout",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),T=Object(r.createContext)({AuthStore:N,UserStore:C,ImageStore:I,HistoryStore:A});window.stores={AuthStore:N,UserStore:C,ImageStore:I,HistoryStore:A};var B=function(){return Object(r.useContext)(T)}},95:function(e,t,n){}},[[101,3,4]]]);
//# sourceMappingURL=main.29bc2f78.chunk.js.map